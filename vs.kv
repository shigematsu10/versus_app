#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#: import RiseInTransition kivy.uix.screenmanager.RiseInTransition

Display:

<Display>:
    BoxLayout:
        orientation: "vertical"
        ScreenManager:
            id: sm
            Screen_One:
            Screen_Two:
            Screen_Three:

        BoxLayout:
            size_hint: 1, None
            height: '48dp'
            canvas:
                Color:
                    rgba: 1,1,1,1
                Rectangle:
                    pos: self.pos
                    size: self.size
            BoxLayout:
                Label:
                    size_hint: 1, None
                Button:
                    background_normal: ''
                    background_color: (1,1,1,1)
                    on_release:
                        sm.transition = SlideTransition(direction='right')
                        sm.current = 'screen_one'
                    Image:
                        source: "home.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 70, 70
                Label:# padding
                    size_hint: 1, None
            BoxLayout:
                Label:# padding
                    size_hint: 1, None
                Button:
                    background_normal: ''
                    background_color: (1,1,1,1)
                    on_release:
                        sm.transition = RiseInTransition()
                        sm.current = 'screen_two'
                    Image:
                        source: "seiseki.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 70, 70
                Label:# padding
                    size_hint: 1, None
            BoxLayout:
                Label:# padding
                    size_hint: 1, None
                    disabled_color: 1,1,1,1
                Button:
                    background_normal: ''
                    background_color: (1,1,1,1)
                    on_release:
                        sm.transition = SlideTransition(direction='left')
                        sm.current = 'screen_three'
                    Image:
                        source: "settei.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 70, 70
                Label:# padding
                    size_hint: 1, None

<Screen_One>:
    name: 'screen_one'
    canvas:
        Rectangle:
            source: "background.png"
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        Label:# padding
            size_hint: 0.8, 0.01

        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 0.45
            pos_hint: {'x':0.1, 'y':0.5}
            
            canvas:
                Rectangle:
                    source: "vs_card1.png"
                    pos: self.pos
                    size: self.size
            BoxLayout:
                padding: 0,20,0,0
                Label:
                    color: 1,1,1,1
                    halign: 'left'
                    text: root.pl0_name
                Image:
                    source: 'pl0_black.png'
            Label:
                foreground_color: 1,1,1,1
                text: root.pl0_desc
                halign: 'center'
                valign: 'center'
                background_active: 'touka.png'
                background_normal: 'touka.png'

        Label:# padding
            size_hint: 0.8, 0.02

        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 0.45
            pos_hint: {'x':0.1, 'y':0.5}
            canvas:
                Rectangle:
                    source: "vs_card2.png"
                    pos: self.pos
                    size: self.size
            BoxLayout:
                padding: 0,20,0,0
                Label:
                    color: 1,1,1,1
                    halign: 'left'
                    text: root.pl1_name
                Image:
                    source: 'pl1_black.png'
            Label:
                foreground_color: 1,1,1,1
                text: root.pl1_desc
                halign: 'center'
                valign: 'center'
                background_active: 'touka.png'
                background_normal: 'touka.png'

        Label:# padding
            size_hint: 0.8, 0.01


<Screen_Two>:
    name: 'screen_two'
    canvas:
        Rectangle:
            source: "vs_back.jpeg"
            pos: 0, 0
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 20,30,20,30

        BoxLayout:
            size_hint_y: 0.5
            padding: 0,20,0,20
            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: view_label2
                    text_size: 200, 100
                    size_hint_y: 0.1
                    halign: 'left'
                    valign: 'middle'
                    color: 0,0,0,1
                    text: '総成績'
                Label:
                    text_size: 300, 150
                    halign: 'left'
                    valign: 'middle'
                    markup: True
                    text: root.all_result_text
                    font_size: 25
            Knob:
                size: 200, 200
                min: 0
                max: 100
                step: 5
                value: (root.pl0_win_num / root.all_match_num)*100
                knobimg_size: 0.5
                knobimg_source: "knob_metal.png"
                marker_img: "blue.png"
                markeroff_color: 1, 0, 0, 1

        Button:
            background_color: 0,0,0,1
            size_hint_y: 0.2
            text: '最近の成績'

        ScrollView:
            GridLayout:
                cols:1
                size_hint_x: 1
                size_hint_y: 1.5
                BoxLayout:
                    Button:
                        background_color: "#666666"
                        text: root.result5_text_newest
                        font_size: 25
                    Button:
                        id: result1
                        background_color: 0,0,0,0
                        size_hint_x: 0.1
                        Image:
                            source: root.winner5_img
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size_hint: 1, 1
                            
                BoxLayout:
                    Button:
                        background_color: "#666666"
                        text: root.result4_text
                        font_size: 25
                    Button:
                        id: result2
                        background_color: 0,0,0,0
                        size_hint_x: 0.1
                        Image:
                            source: root.winner4_img
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            ssize_hint: 1, 1
                BoxLayout:
                    Button:
                        background_color: "#666666"
                        text: root.result3_text
                        font_size: 25
                    Button:
                        id: result3
                        background_color: 0,0,0,0
                        size_hint_x: 0.1
                        Image:
                            source: root.winner3_img
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size_hint: 1, 1
                BoxLayout:
                    Button:
                        background_color: "#666666"
                        text: root.result2_text
                        font_size: 25
                    Button:
                        id: result4
                        background_color: 0,0,0,0
                        size_hint_x: 0.1
                        Image:
                            source: root.winner2_img
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size_hint: 1, 1
                BoxLayout:
                    Button:
                        background_color: "#666666"
                        text: root.result1_text_oldest
                        font_size: 25
                    Button:
                        id: result5
                        background_color: 0,0,0,0
                        size_hint_x: 0.1
                        Image:
                            source: root.winner1_img
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size_hint: 1, 1

        Label:# padding
            size_hint: 0.8, 0.1
        Button:
            background_color: 0,0,0,1
            pos_hint: {'center_x':.9, 'center_y:':1}
            size_hint: (None, None)
            width: 200
            height: 100
            text: '成績追加'
            on_press: root.popup_open()
<PopupMenu>:
    orientation: 'vertical'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            Label:# padding
                size_hint: 0.1, 0.1
            Label:
                text: root.pl0_name
            CheckBox:
                id: pl0
                group: "gp02"
                background_radio_normal: 'white_radio.png'
                background_radio_down: 'on_radio.png'
            Label:
                text: root.pl1_name
            CheckBox:
                id: pl1
                group: "gp02"
                background_radio_normal: 'white_radio.png'
                background_radio_down: 'on_radio.png'
        Label:# padding
            size_hint: 0.3, 0.1
        BoxLayout:
            Label:# padding
                size_hint: 0.5, 0.1
            Label:
                text: root.match0
            CheckBox:
                id: match0
                group: "gp03"
                background_radio_normal: 'white_radio.png'
                background_radio_down: 'on_radio.png'
            Label:
                text: root.match1
            CheckBox:
                id: match1
                group: "gp03"
                background_radio_normal: 'white_radio.png'
                background_radio_down: 'on_radio.png'

            Label:
                text: root.match2
            CheckBox:
                id: match2
                group: "gp03"
                background_radio_normal: 'white_radio.png'
                background_radio_down: 'on_radio.png'
        Button:
            text: 'Add'
            size_hint: 1.0,1.0
            on_press: root.add_result()
            on_release: root.popup_close()

<Screen_Three>:
    name: 'screen_three'
    canvas:
        Rectangle:
            source: "vs_back.jpeg"
            pos: 0, 0
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 20,30,20,30

        Label:# padding
            size_hint: 0.8, 0.1

        BoxLayout:
            orientation: 'vertical'
            Label:
                #text_size: 200, 100
                size_hint_y: 0.1
                halign: 'left'
                valign: 'middle'
                color: 0,0,0,1
                text: 'プレイヤー名の変更'
            BoxLayout:
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        Label:
                            text: "Player1"
                            color: 0,0,0,1
                        CheckBox:
                            id: pl0_name
                            group: "gp01"
                        Label:# padding
                            size_hint: 0.8, 0.1
                        Label:
                            text: "Player2"
                            color: 0,0,0,1
                        CheckBox:
                            id: pl1_name
                            group: "gp01"
                    TextInput:
                        id:pl_inp
                        halign: 'left'
                        valign: 'middle'
                        markup: True
                        text: ''
                        font_size: 25
                Button:
                    background_color: 0,0,1,1
                    size_hint_x: 0.1
                    on_press: root.ch_pl_name()
                    Image:
                        source: 'add.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 40, 40
        
        Label:# padding
            size_hint: 0.8, 0.1
        
        BoxLayout:
            orientation: 'vertical'
            Label:
                #text_size: 200, 100
                size_hint_y: 0.1
                halign: 'left'
                valign: 'middle'
                color: 0,0,0,1
                text: 'プレイヤー紹介文変更'
            BoxLayout:
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        Label:
                            text: "Player1"
                            color: 0,0,0,1
                        CheckBox:
                            id: pl0_desc
                            group: "gp_desc"
                        Label:# padding
                            size_hint: 0.8, 0.1
                        Label:
                            text: "Player2"
                            color: 0,0,0,1
                        CheckBox:
                            id: pl1_desc
                            group: "gp_desc"
                    TextInput:
                        id: desc_inp
                        halign: 'left'
                        valign: 'middle'
                        markup: True
                        text: ''
                        font_size: 25
                Button:
                    background_color: 0,0,1,1
                    size_hint_x: 0.1
                    on_press: root.add_description()
                    Image:
                        source: 'add.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 40, 40
        Label:# padding
            size_hint: 0.8, 0.1

        BoxLayout:
            orientation: 'vertical'
            Label:
                #text_size: 200, 100
                size_hint_y: 0.1
                halign: 'left'
                valign: 'middle'
                color: 0,0,0,1
                text: '勝負の変更'
            BoxLayout:
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        Label:# padding
                            size_hint: 0.5, 0.1
                        Label:
                            text: root.match0
                            color: 0,0,0,1
                        CheckBox:
                            id: vs0
                            group: "add_vs"
                        Label:
                            text: root.match1
                            color: 0,0,0,1
                        CheckBox:
                            id: vs1
                            group: "add_vs"
                        Label:
                            text: root.match2
                            color: 0,0,0,1
                        CheckBox:
                            id: vs2
                            group: "add_vs"
                    TextInput:
                        id:vs_inp
                        halign: 'left'
                        valign: 'middle'
                        markup: True
                        text: ''
                        size_hint: 1., 0.7
                        font_size: 25
                Button:
                    background_color: 0,0,1,1
                    size_hint_x: 0.1
                    on_press: root.change_vs_type()
                    Image:
                        source: 'add.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: 40, 40
        Label:# padding
            size_hint: 0.8, 0.1